[upstream_fair]
recipe = hexagonit.recipe.download
url=http://github.com/gnosek/nginx-upstream-fair/tarball/${defined-versions:upstream_fair_module}
strip-top-level-dir=true

[echo_module]
recipe = hexagonit.recipe.download
url=http://github.com/agentzh/echo-nginx-module/tarball/${defined-versions:echo_module}
strip-top-level-dir=true

[headers_more_module]
recipe = hexagonit.recipe.download
url = http://github.com/agentzh/headers-more-nginx-module/tarball/${defined-versions:headers_more_module}
strip-top-level-dir=true

[devel_kit_more_module]
recipe = hexagonit.recipe.download
url = https://github.com/simpl/ngx_devel_kit/archive/v${defined-versions:devel_kit_nginx_module}.tar.gz
strip-top-level-dir=true


[nginx]
recipe = hexagonit.recipe.cmmi
url = http://nginx.org/download/nginx-${defined-versions:nginx}.tar.gz
strip-top-level-dir=true
configure-options = --with-debug
    --add-module=${upstream_fair:destination}
    --add-module=${headers_more_module:destination}
    --add-module=${echo_module:destination}
    --with-cc-opt="-D NGX_HAVE_CASELESS_FILESYSTEM=0"
    --with-http_ssl_module
    --with-http_stub_status_module
    --http-proxy-temp-path=${buildout:directory}/var/nginx/cache/client_body_temp
cache_size = 64
environment-section = environment
